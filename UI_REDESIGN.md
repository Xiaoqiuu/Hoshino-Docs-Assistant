# UI 重新设计说明 🎨

## 🎨 主题色更新

### 新配色方案
- **主色调**: 粉红色 `#f5abb9`
- **辅助色**: 白色 `#ffffff`
- **渐变**: `#f5abb9` → `#ffd4dc` / `#ffc4d0`
- **背景**: `#f9f9f9` (消息区域)

### 应用位置
- ✅ 标题栏渐变背景
- ✅ 用户消息气泡
- ✅ 发送按钮
- ✅ 加载动画圆点
- ✅ 链接颜色
- ✅ 选中文本预览区域

## 🎯 标题栏优化

### 按钮布局（从左到右）
```
✨ Hoshino [文档模式]        📌  □  ×
```

1. **📌 置顶按钮**
   - 圆形按钮
   - 激活时旋转 45 度
   - 半透明背景

2. **□ 最大化按钮**
   - 使用简洁的方框符号
   - 最大化后显示 ◱
   - 圆形按钮

3. **× 关闭按钮**
   - 悬停时变红色
   - 圆形按钮

### 移除的按钮
- ❌ 设置按钮（改为托盘呼出）

### 样式特点
- 圆形按钮设计
- 半透明背景
- 悬停效果
- 粉红色渐变标题栏

## 💬 对话气泡优化

### ChatGPT 风格设计

#### 用户消息
```css
- 背景: 粉红色渐变 (#f5abb9 → #ffc4d0)
- 颜色: 白色
- 圆角: 18px
- 右下角: 4px (小圆角)
- 阴影: 0 2px 8px rgba(0, 0, 0, 0.08)
- 动画: 滑入效果
```

#### AI 回复
```css
- 背景: 白色
- 颜色: #333
- 圆角: 18px
- 左下角: 4px (小圆角)
- 边框: 1px solid #f0f0f0
- 阴影: 0 2px 8px rgba(0, 0, 0, 0.08)
- 动画: 滑入效果
```

### 消息动画
```css
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

## 📝 输入框重新设计

### ChatGPT 风格悬浮输入框

#### 位置
- 绝对定位在底部
- 距离底部 16px
- 左右各留 16px 边距

#### 样式
```css
- 背景: 白色
- 圆角: 24px (完全圆角)
- 阴影: 0 4px 20px rgba(0, 0, 0, 0.12)
- 边框: 1px solid #f0f0f0
- 内边距: 12px 16px
```

#### 输入框
```css
- 无边框
- 透明背景
- 占满剩余空间
- 占位符颜色: #999
```

#### 发送按钮
```css
- 背景: 粉红色渐变
- 圆角: 18px
- 阴影: 0 2px 8px rgba(245, 171, 185, 0.3)
- 悬停: 上移 + 增强阴影
```

## 🎨 整体布局

### 消息区域
```css
- 背景: #f9f9f9
- 内边距: 20px 16px 80px 16px (底部留空间给悬浮输入框)
- 消息间距: 16px
```

### 标题栏
```css
- 背景: 粉红色渐变
- 高度: 更紧凑
- 边框: 底部白色半透明线
```

## 🔧 配置自动保存

### 问题
- 之前每次启动都需要重新配置 API Key
- 配置没有自动加载

### 解决方案

#### 1. 配置服务改进
```typescript
// configService 在应用启动时自动加载配置
constructor() {
  const userDataPath = app.getPath('userData');
  this.configPath = path.join(userDataPath, 'config.json');
  this.config = this.loadConfig(); // 自动加载
}
```

#### 2. AI 服务初始化
```typescript
// 应用启动时从配置加载
app.whenReady().then(() => {
  const config = configService.getConfig();
  aiService.loadConfigFromService(config);
  console.log('已加载配置');
});
```

#### 3. 配置保存
```typescript
// 设置保存时自动写入文件
ipcMain.handle('set-config', async (_event, config) => {
  configService.saveConfig(config); // 持久化
  aiService.setApiKey(config.apiKey, config.baseUrl); // 更新服务
  return { success: true };
});
```

### 配置文件位置
```
Windows: C:\Users\[用户名]\AppData\Roaming\hoshino-doc-assistant\config.json
macOS: ~/Library/Application Support/hoshino-doc-assistant/config.json
Linux: ~/.config/hoshino-doc-assistant/config.json
```

## 📊 视觉对比

### 标题栏
| 之前 | 现在 |
|------|------|
| 紫色渐变 | 粉红色渐变 |
| 方形按钮 | 圆形按钮 |
| 4 个按钮 | 3 个按钮 |

### 消息气泡
| 之前 | 现在 |
|------|------|
| 紫色用户消息 | 粉红色用户消息 |
| 灰色 AI 回复 | 白色 AI 回复 |
| 统一圆角 | 不对称圆角 |
| 无动画 | 滑入动画 |

### 输入框
| 之前 | 现在 |
|------|------|
| 固定在底部 | 悬浮在底部 |
| 方形 | 完全圆角 |
| 无阴影 | 深阴影 |
| 紫色按钮 | 粉红色按钮 |

## 🎯 设计理念

### 1. 温柔可爱
- 粉红色主题传达温暖友好
- 圆角设计更加柔和
- 渐变色增加层次感

### 2. 现代简洁
- ChatGPT 风格的悬浮输入框
- 简化的标题栏按钮
- 清爽的白色背景

### 3. 视觉层次
- 阴影区分不同元素
- 渐变增加深度
- 动画提升体验

### 4. 用户体验
- 配置自动保存
- 托盘快速访问设置
- 流畅的动画过渡

## ✨ 特色功能

### 1. 消息动画
每条消息出现时都有滑入动画，提升视觉体验

### 2. 悬浮输入框
类似 ChatGPT 的设计，更加现代和优雅

### 3. 圆形按钮
标题栏按钮采用圆形设计，更加精致

### 4. 自动配置
启动时自动加载保存的配置，无需重复设置

## 🎨 颜色参考

### 主色调
```css
--primary: #f5abb9;
--primary-light: #ffc4d0;
--primary-lighter: #ffd4dc;
--primary-bg: #fff5f7;
--primary-bg-light: #ffe8ed;
```

### 中性色
```css
--white: #ffffff;
--gray-50: #f9f9f9;
--gray-100: #f0f0f0;
--gray-300: #d1d5db;
--gray-600: #666666;
--gray-900: #333333;
```

## 🚀 使用说明

### 首次使用
1. 启动应用
2. 右键托盘图标
3. 点击"设置"
4. 配置 API Key
5. 保存后自动记忆

### 日常使用
1. Ctrl+Alt+H 唤出
2. 直接开始对话
3. 配置已自动加载

## 📝 注意事项

1. **配置持久化**
   - 配置保存在用户数据目录
   - 应用重启后自动加载
   - 无需重复配置

2. **托盘设置**
   - 设置按钮移至托盘菜单
   - 右键托盘图标访问
   - 简化标题栏

3. **视觉效果**
   - 所有动画使用 CSS
   - 性能优化
   - 流畅体验

## ✅ 完成清单

- ✅ 粉红色主题应用
- ✅ 标题栏按钮优化（3 个圆形按钮）
- ✅ ChatGPT 风格悬浮输入框
- ✅ 消息气泡重新设计
- ✅ 滑入动画效果
- ✅ 配置自动保存和加载
- ✅ 托盘设置访问
- ✅ 整体视觉统一

## 🎉 效果预览

### 标题栏
```
┌─────────────────────────────────────┐
│ ✨ Hoshino [文档模式]    📌 □ ×    │ ← 粉红色渐变
└─────────────────────────────────────┘
```

### 对话界面
```
┌─────────────────────────────────────┐
│                                     │
│  ┌─────────────────┐                │
│  │ AI 回复（白色） │                │
│  └─────────────────┘                │
│                                     │
│                ┌─────────────────┐  │
│                │ 用户消息（粉红）│  │
│                └─────────────────┘  │
│                                     │
│  ╭─────────────────────────────╮   │
│  │ 输入框...          [发送]   │   │ ← 悬浮
│  ╰─────────────────────────────╯   │
└─────────────────────────────────────┘
```

## 🎊 完成！

全新的粉红色主题 UI 已完成，配置自动保存功能已实现！
